(this.webpackJsonpmath=this.webpackJsonpmath||[]).push([[0],{299:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},501:function(e,t){},656:function(e,t,n){},657:function(e,t,n){"use strict";n.r(t);var c,r=n(2),a=n.n(r),i=n(80),s=n.n(i),o=(n(299),n(300),n(301),n(26)),u=n(4),l=n(5),d=n(33),b=n(27),j=n(41),f=n.n(j),h=n(1),p=["children","className"],O=Object(b.a)((function(e){var t=e.children,n=e.className,c=Object(d.a)(e,p);return Object(h.jsx)("button",Object(u.a)(Object(u.a)({className:f()(n,"button")},c),{},{children:t}))}))(c||(c=Object(o.a)(["\n  &:not(:hover) {\n    background-color: #0000;\n    border-color: #0000;\n    color: #fff;\n  }\n  &:hover {\n  }\n  &:active {\n    background-color: #eee;\n  }\n"]))),m=n(112),v=n.n(m),g=["buttonProps","contentProps","title"];function x(e){return e.displayName||e.name||"Component"}var y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=function(c){var a=c.buttonProps,i=void 0===a?{}:a,s=c.contentProps,o=void 0===s?{}:s,b=c.title,j=void 0===b?"":b,p=Object(d.a)(c,g),O=Object(r.useState)(!1),m=Object(l.a)(O,2),x=m[0],y=m[1],k=j||n||"";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(e,Object(u.a)(Object(u.a)(Object(u.a)({},i),p),{},{className:f()(null===i||void 0===i?void 0:i.className,null===p||void 0===p?void 0:p.className),onClick:function(e){e.preventDefault(),y(!0),i.onClick&&i.onClick(e)}})),x&&Object(h.jsxs)(v.a,{isOpen:x,onRequestClose:function(){return y(!1)},contentLabel:k,overlayClassName:{base:"modal modal-background is-active",afterOpen:"",beforeClose:""},className:{base:"modal-content",afterOpen:"",beforeClose:""},closeTimeoutMS:50,children:[Object(h.jsx)("button",{className:"modal-close",onClick:function(){return y(!1)},children:"close"}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("header",{className:"card-header",children:Object(h.jsx)("p",{className:"card-header-title",children:k})}),Object(h.jsx)("div",{className:"card-content",children:Object(h.jsx)(t,Object(u.a)(Object(u.a)({},o),{},{onFinish:function(){return y(!1)}}))})]})]})]})};return c.displayName="WithModal(".concat(x(e),")"),c},k=y((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:"Login"}))}),(function(e){var t,n=e.onLogin,c=Object(r.useState)(null!==(t=localStorage.getItem("idp"))&&void 0!==t?t:"https://solidcommunity.net"),a=Object(l.a)(c,2),i=a[0],s=a[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("idp",i),n(i)},children:[Object(h.jsx)("div",{className:"field",children:Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("input",{id:"idp",className:"input",type:"url",value:i,onChange:function(e){e.preventDefault();var t=e.currentTarget.value;s(t)},placeholder:"Where is your Solid Pod?"})})}),Object(h.jsx)("div",{className:"field",children:Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("input",{type:"submit",value:"Connect",className:"button is-link"})})})]})}),"Select your Solid identity provider"),w=n(85),N=function(){return Object(w.b)()},C=w.c,E=n(276),I=n(0),S=n.n(I),L=n(3),P=n(17),M=n(111),D={message:"",type:"info"},F=function(e){return function(){var t=Object(L.a)(S.a.mark((function t(n,c){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(q(e)),t.next=3,new Promise((function(e){setTimeout(e,5e3)}));case 3:(r=R(c())).message===e.message&&r.type===e.type&&n(_());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},T=Object(P.c)({name:"info",initialState:D,reducers:{setInfo:function(e,t){return t.payload},clearInfo:function(){return D}}}),A=T.actions,q=A.setInfo,_=A.clearInfo,R=function(e){return e.info},W=T.reducer,z=n(118),B=n.n(z);var $=function(e){var t=new B.a.Graph;Object.values(e).forEach((function(e){t.setNode(e.uri),Object.values(e.dependencies).forEach((function(n){return t.setEdge(e.uri,n.uri)}))}));var n=Object.fromEntries(Object.entries(e).map((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return[n,Object(u.a)(Object(u.a)({},c),{},{dependencies:{}})]})));return function(e){if(!B.a.alg.isAcyclic(e))throw new Error("pruning is possible on DAG only");return e.edges().forEach((function(t){e.removeEdge(t),B.a.alg.dijkstra(e,t.v)[t.w].distance===1/0&&e.setEdge(t)})),e}(t).edges().map((function(e){return{source:e.v,target:e.w}})).forEach((function(e){var t=e.source,c=e.target;n[t].dependencies[c]=n[c]})),n},G=n(8),U=n(22),H=n(20),Y={definition:"https://terms.math.livegraph.org#Definition",statement:"https://terms.math.livegraph.org#Statement",dependsOn:"https://terms.math.livegraph.org#dependsOn"},J=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.g)(t,{fetch:U.fetch});case 2:return n=e.sent,c=Object(G.k)(n),r={nodes:[],links:[]},c.forEach((function(e){var n=K(e,t);r.nodes.push(n),Object(G.i)(e,Y.dependsOn).forEach((function(e){r.links.push([n.id,e.value])}))})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.g)(t.document,{fetch:U.fetch});case 2:if(n=e.sent,!(c=Object(G.j)(n,t.id))){e.next=15;break}if(r=c,t.label&&(r=Object(G.o)(r,H.c.label,t.label.en,"en")),t.type&&(r=Object(G.q)(r,H.b.type,Y[t.type])),t.description&&(r=Object(G.o)(r,H.b.value,t.description.en,"en")),t.dependencies&&(r=Object(G.m)(r,Y.dependsOn),t.dependencies.forEach((function(e){r=Object(G.a)(r,Y.dependsOn,e)}))),r===c){e.next=14;break}return a=Object(G.p)(n,r),e.next=14,Object(G.n)(t.document,a,{fetch:U.fetch});case 14:return e.abrupt("return",K(r,t.document));case 15:throw new Error("node to update not found");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e,t){var n,c,r,a,i,s,o=Object(G.b)(e),u=null!==(n=null===(c=Object(G.h)(e,H.b.type))||void 0===c?void 0:c.value)&&void 0!==n?n:"",l=null!==(r=null===(a=Object(G.h)(e,H.b.value))||void 0===a?void 0:a.value)&&void 0!==r?r:"",d=null!==(i=null===(s=Object(G.h)(e,H.c.label))||void 0===s?void 0:s.value)&&void 0!==i?i:"",b=Object(G.l)(e,Y.dependsOn);switch(u){case Y.definition:return{id:o,type:"definition",label:{en:d},description:{en:l},dependencies:b,dependents:[],examples:[],created:0,updated:0,document:t};case Y.statement:return{id:o,type:"statement",label:{en:d},description:{en:l},dependencies:b,dependents:[],examples:[],proofs:[],created:0,updated:0,document:t};default:throw new Error("thing is not a Definition or Statement")}},Q=["id","document"],V=Object(P.b)("math/addGraph",function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(P.b)("math/updateNode",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=n.dispatch)(F({type:"info",message:"saving ..."})),e.next=4,X(t);case 4:return r=e.sent,c(F({type:"success",message:"... saved"})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ee=Object(P.c)({name:"math",initialState:{entities:{node:{byId:{},allIds:[]}},ui:{highlighted:"",selected:""}},reducers:{highlight:function(e,t){e.ui.highlighted=t.payload},select:function(e,t){e.ui.selected=t.payload}},extraReducers:function(e){e.addCase(V.fulfilled,(function(e,t){var n=t.payload,c=n.nodes,r=n.links;c.forEach((function(t){e.entities.node.byId[t.id]=t,e.entities.node.allIds.push(t.id)})),r.forEach((function(t){var n=Object(l.a)(t,2),c=n[0],r=n[1];e.entities.node.byId[c].dependencies.push(r),e.entities.node.byId[r].dependents.push(c)}))})).addCase(Z.fulfilled,(function(e,t){var n=t.payload;e.entities.node.byId[n.id].label=n.label,e.entities.node.byId[n.id].type=n.type,e.entities.node.byId[n.id].description=n.description;var c=e.entities.node.byId[n.id].dependencies;e.entities.node.byId[n.id].dependencies=n.dependencies;var r=c.filter((function(e){return!n.dependencies.includes(e)}));n.dependencies.filter((function(e){return!c.includes(e)})).forEach((function(t){e.entities.node.byId[t].dependents.push(n.id)})),r.forEach((function(t){e.entities.node.byId[t].dependents=e.entities.node.byId[t].dependents.filter((function(e){return e!==n.id}))}))}))}}),te=ee.actions,ne=te.highlight,ce=te.select,re=Object(M.a)((function(e){return e.math.entities.node}),(function(e){return e.document.entities.document}),(function(e,t){var n=e.byId,c=t.byId,r=Object.fromEntries(Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1],a=r.id,i=r.document,s=Object(d.a)(r,Q);return[n,Object(u.a)(Object(u.a)({},s),{},{uri:a,dependencies:{},dependents:{},document:c[i]})]})));return Object.entries(r).forEach((function(e){var t=Object(l.a)(e,2),c=t[0],a=t[1];a.dependencies=Object.fromEntries(n[c].dependencies.map((function(e){return[e,r[e]]}))),a.dependents=Object.fromEntries(n[c].dependents.map((function(e){return[e,r[e]]})))})),r})),ae=Object(M.a)(re,(function(e){return $(e)})),ie=function(e){return e.math.ui.highlighted},se=function(e){return e.math.ui.selected},oe=Object(M.a)(se,re,(function(e,t){var n,c;return e?Object.values(null!==(n=null===(c=t[e])||void 0===c?void 0:c.dependencies)&&void 0!==n?n:{}).map((function(e){return e.uri})):[]})),ue=Object(M.a)(se,re,(function(e,t){return t[e]})),le=ee.reducer,de=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t){e.next=13;break}return e.next=4,je(t);case 4:if(c=e.sent,!(r=c.public)){e.next=13;break}return e.next=9,Object(G.g)(r,{fetch:U.fetch});case 9:a=e.sent,i=Object(G.k)(a),s=i.filter((function(e){return Object(G.i)(e,H.d.forClass).map((function(e){return e.value})).includes("https://terms.math.livegraph.org#Definition")})).map((function(e){return Object(G.i)(e,H.d.instance)})).flat().map((function(e){return e.value})),n=s;case 13:return 0===n.length&&(n=["https://mrkvon.solidcommunity.net/public/math/graph-theory.ttl"]),e.t0=Object,e.next=17,Promise.all(n.map(function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.g)(t,{fetch:U.fetch});case 2:return n=e.sent,c=Object(G.f)(n),e.abrupt("return",[t,c]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return e.t1=e.sent,o=e.t0.fromEntries.call(e.t0,e.t1),e.abrupt("return",n.map((function(e){return{id:e,uri:e,access:o[e]}})));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(L.a)(S.a.mark((function e(t,n,c){var r,a,i,s,o,u,l,d,b,j,f;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(G.g)(t,{fetch:U.fetch});case 3:e.next=29;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(G.n)(t,Object(G.d)(),{fetch:U.fetch});case 9:return e.next=11,Object(G.g)(t,{fetch:U.fetch});case 11:return r=e.sent,a={id:t,uri:t,access:Object(G.f)(r)},e.next=15,je(n);case 15:if(i=e.sent,!(s=c?i.public:i.private)){e.next=28;break}return e.next=20,Object(G.g)(s,{fetch:U.fetch});case 20:return u=e.sent,l=null!==(o=Object(G.j)(u,s))&&void 0!==o?o:Object(G.e)({url:s}),d="".concat(s,"#").concat(Date.now()),b=Object(G.c)(l).addUrl(H.a.references,d).build(),j=Object(G.c)(Object(G.e)({url:d})).addUrl(H.b.type,H.d.TypeRegistration).addUrl(H.d.forClass,"https://terms.math.livegraph.org#Definition").addUrl(H.d.forClass,"https://terms.math.livegraph.org#Statement").addUrl(H.d.instance,t).build(),f=Object(G.p)(Object(G.p)(u,b),j),e.next=28,Object(G.n)(s,f,{fetch:U.fetch});case 28:return e.abrupt("return",a);case 29:throw new Error("document already exists");case 30:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,c){return e.apply(this,arguments)}}(),je=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.g)(t,{fetch:U.fetch});case 2:return n=e.sent,c=Object(G.j)(n,t),r={public:"",private:""},c&&(r.public=null!==(a=null===(i=Object(G.h)(c,H.d.publicTypeIndex))||void 0===i?void 0:i.value)&&void 0!==a?a:"",r.private=null!==(s=null===(o=Object(G.h)(c,H.d.privateTypeIndex))||void 0===o?void 0:o.value)&&void 0!==s?s:""),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=Object(P.b)("math/addDocuments",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,de(t);case 3:return(r=e.sent).forEach((function(e){return c(V(e.uri))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),he=Object(P.b)("math/createDocument",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.uri,r=t.isPublic,a=n.getState,i=n.dispatch,s=Se(a()),e.prev=3,i(F({type:"info",message:"creating a new document"})),e.next=7,be(c,s,r);case 7:return o=e.sent,i(F({type:"success",message:"created a new document"})),e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(3),e.t0 instanceof Error&&i(F({type:"error",message:e.t0.message})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()),pe=Object(P.c)({name:"document",initialState:{entities:{document:{byId:{},allIds:[]}},selected:""},reducers:{selectDocument:function(e,t){e.selected=t.payload}},extraReducers:function(e){e.addCase(fe.fulfilled,(function(e,t){e.entities.document={byId:Object.fromEntries(t.payload.map((function(e){return[e.id,e]}))),allIds:t.payload.map((function(e){return e.id}))}})).addCase(he.fulfilled,(function(e,t){e.entities.document.allIds.push(t.payload.id),e.entities.document.byId[t.payload.id]=t.payload}))}}),Oe=pe.actions.selectDocument,me=Object(M.a)((function(e){return e.document.entities.document}),(function(e){var t=e.byId;return e.allIds.map((function(e){return t[e]}))})),ve=function(e){return e.document.selected},ge=pe.reducer,xe=function(){var e=Object(L.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(U.login)({oidcIssuer:t,redirectUrl:window.location.href,clientName:"Friends Crawler"});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Could not find a Solid Pod at ".concat(t)),localStorage.removeItem("idp");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.logout)();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=Object(P.b)("login/init",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,xe();case 3:return i=e.sent,s=null!==(c=null===i||void 0===i?void 0:i.webId)&&void 0!==c?c:"",o=null!==(r=null===i||void 0===i?void 0:i.isLoggedIn)&&void 0!==r&&r,a(fe(s)),e.abrupt("return",{webId:s,isLoggedIn:o});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ne=Object(P.b)("login/login",function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(P.b)("login/logout",Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke();case 2:case"end":return e.stop()}}),e)})))),Ee=Object(P.c)({name:"login",initialState:{webId:"",isLoggedIn:!1,status:"loading"},reducers:{},extraReducers:function(e){e.addCase(we.pending,(function(e){e.status="loading"})).addCase(we.fulfilled,(function(e,t){e.status="idle",e.webId=t.payload.webId,e.isLoggedIn=t.payload.isLoggedIn})).addCase(Ne.pending,(function(e){e.status="loading"})).addCase(Ne.fulfilled,(function(e){e.status="idle"})).addCase(Ce.pending,(function(e){e.status="loading"})).addCase(Ce.fulfilled,(function(e){e.status="idle",e.webId="",e.isLoggedIn=!1}))}}),Ie=function(e){return{webId:e.login.webId,isLoggedIn:e.login.isLoggedIn}},Se=function(e){return e.login.webId},Le=Object(M.a)(Se,(function(e){var t=Object(E.a)(/^(.*)profile\/card#me$/g,{storage:1}).exec(e);return(null===t||void 0===t?void 0:t.groups)?t.groups.storage:""})),Pe=function(e){return e.login.status},Me=Ee.reducer,De=["buttonProps","menuProps"];var Fe,Te=function(e,t){var n,c=function(n){var c=n.buttonProps,a=n.menuProps,i=Object(d.a)(n,De),s=Object(r.useState)(!1),o=Object(l.a)(s,2),b=o[0],j=o[1];return Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},i),{},{style:{position:"relative",flexDirection:"column",display:"inline-flex",alignItems:"end",zIndex:3},onMouseLeave:function(){return j(!1)},onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||j(!1)},children:[Object(h.jsx)(e,Object(u.a)(Object(u.a)({},c),{},{onMouseEnter:function(){return j(!0)},onFocus:function(){return j(!0)}})),Object(h.jsx)("div",{style:{position:"relative",width:0,height:0,visibility:b?"visible":"hidden"},children:Object(h.jsx)("div",{className:"box p-0",style:{position:"absolute",right:0,overflow:"hidden"},children:Object(h.jsx)(t,Object(u.a)(Object(u.a)({},a),{},{onClickClose:function(){return j(!1)}}))})})]}))};return c.displayName="WithMenu(".concat((n=e).displayName||n.name||"Component",")"),c},Ae=Te((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-user"})}))}),(function(e){var t=e.user,n=e.onLogout;return Object(h.jsx)("div",{className:"menu box p-0",children:Object(h.jsxs)("ul",{className:"menu-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)("a",{className:"disabled",children:t.webId})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{onClick:n,children:"Logout"})})]})})})),qe=function(e){var t=Object.assign({},e),n=N(),c=C(Ie);return"loading"===C(Pe)?Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{disabled:!0,children:Object(h.jsx)("i",{className:"icon icon-spinner animate-pulse"})})):c.isLoggedIn?Object(h.jsx)(Ae,{menuProps:{user:c,onLogout:function(){return n(Ce())}},buttonProps:t}):Object(h.jsx)(k,Object(u.a)(Object(u.a)({},t),{},{contentProps:{onLogin:function(e){n(Ne(e))}},buttonProps:{}}))},_e=n(12),Re=n(24),We=n.n(Re),ze=function(e,t,n,c){var r=Object(l.a)(t,2),a=r[0],i=r[1];e.font="20px Arial",e.textBaseline="middle",e.textAlign="left",Object.assign(e,c),e.fillText(n,a,i)},Be=function(e,t,n,c){var r=Object(l.a)(t,2),a=r[0],i=r[1];Object.assign(e,c),e.beginPath(),e.arc(a,i,n,0,2*Math.PI),e.fill()},$e=function(e,t,n,c){Object.assign(e,c),e.beginPath(),e.moveTo.apply(e,Object(_e.a)(t)),e.lineTo.apply(e,Object(_e.a)(n)),e.stroke()},Ge=n(668),Ue=n(286),He=n(287),Ye=["graph","grid","onTransform","onHover","onSelectNode"],Je=function(e){var t=e.graph,n=e.grid,c=e.onTransform,a=e.onHover,i=e.onSelectNode,s=Object(d.a)(e,Ye),o=Object(r.useRef)(null),b=Object(r.useState)({width:0,height:0}),j=Object(l.a)(b,2),p=j[0],O=p.width,m=p.height,v=j[1];Object(r.useEffect)((function(){if(o&&o.current){var e=o.current.getContext("2d");if(e){var c=[O/2,m/2];return e.save(),e.translate.apply(e,c),e.clearRect(-c[0],-c[1],O,m),function(e,t,n,c){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a="#fff2",i=-r[1],s=c-r[1],o=-r[0],u=n-r[0],l=function(e){return 0===e?2:e%t.highlight===0?1:.5},d=0;d*t.distance+t.origin[0]<=u;){var b=d*t.distance+t.origin[0];b>=o&&$e(e,[b,i],[b,s],{strokeStyle:a,lineWidth:l(d)}),d++}for(d=-1;d*t.distance+t.origin[0]>=o;){var j=d*t.distance+t.origin[0];j<=u&&$e(e,[j,i],[j,s],{strokeStyle:a,lineWidth:l(d)}),d--}for(d=0;d*t.distance+t.origin[1]<=s;){var f=d*t.distance+t.origin[1];f>=i&&$e(e,[o,f],[u,f],{strokeStyle:a,lineWidth:l(d)}),d++}for(d=-1;d*t.distance+t.origin[1]>=i;){var h=d*t.distance+t.origin[1];h<=s&&$e(e,[o,h],[u,h],{strokeStyle:a,lineWidth:l(d)}),d--}}(e,n,O,m,c),function(e,t){t.links.forEach((function(t){var n=[t.source.x,t.source.y],c=[t.target.x,t.target.y],r=We.a.sub(c,n),a=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),i=We.a.div(r,a);$e(e,We.a.add(n,We.a.mul(i,t.source.r)),We.a.sub(c,We.a.mul(i,t.target.r)),{strokeStyle:"white",lineWidth:.5})}));var n="violet",c="red",r="pink",a={node:"#fff8",label:"#fff4"},i=t.nodes.filter((function(e){return"accent"===e.style})),s=t.nodes.filter((function(e){return"focus"===e.style})),o=t.nodes.filter((function(e){return"focus2"===e.style})),u=t.nodes.filter((function(e){return!e.style}));u.forEach((function(t){var n=t.x,c=t.y,r=t.r;return Be(e,[n,c],r,{fillStyle:a.node})})),u.forEach((function(t){var n=t.x,c=t.y,r=t.r,i=t.label;return ze(e,[n+r+5,c],i,{fillStyle:a.label})})),o.forEach((function(t){var n=t.x,c=t.y,a=t.r;return Be(e,[n,c],a,{fillStyle:r})})),o.forEach((function(t){var n=t.x,c=t.y,a=t.r,i=t.label;return ze(e,[n+a+5,c],i,{fillStyle:r})})),s.forEach((function(t){var n=t.x,r=t.y,a=t.r;return Be(e,[n,r],a,{fillStyle:c})})),s.forEach((function(t){var n=t.x,r=t.y,a=t.r,i=t.label;return ze(e,[n+a+5,r],i,{fillStyle:c})})),i.forEach((function(t){var c=t.x,r=t.y,a=t.r;return Be(e,[c,r],a,{fillStyle:n})})),i.forEach((function(t){var c=t.x,r=t.y,a=t.r,i=t.label;return ze(e,[c+a+5,r],i,{fillStyle:n})}))}(e,t),function(){return e.restore()}}}}),[O,m,t,o,n]),Object(r.useEffect)((function(){var e=function(){if(o&&o.current){var e=function(e){if(e&&e.current){var t=e.current;return{height:t.clientHeight,width:t.clientWidth}}return{height:0,width:0}}(o);v(e)}};return e(),window.addEventListener("load",e),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),window.removeEventListener("load",e)}}),[O,m,o]),Object(r.useEffect)((function(){o&&o.current&&(Object(He.a)(o.current).call(Object(Ge.a)().clickDistance(2).on("drag",(function(e){c([[1,0,e.dx],[0,1,e.dy],[0,0,1]])}))),Object(He.a)(o.current).call(Object(Ue.a)().clickDistance(2).scaleExtent([.05,3]).on("zoom",(function(e){var t;Fe=null!==(t=Fe)&&void 0!==t?t:[[1,0,-O/2],[0,1,-m/2],[0,0,1]];var n=e.transform,r=n.x,a=n.y,i=n.k,s=[[i,0,r-O/2],[0,i,a-m/2],[0,0,1]],o=We.a.dot(s,We.a.inv(Fe));Fe=s,c(o)}))))}),[o,c,m,O]);var g=function(e){return function(t){if(o&&o.current){var n=o.current.getBoundingClientRect(),c=t.clientX-n.left,r=t.clientY-n.top;e([c-O/2,r-m/2])}}},x=g(a),y=g(i);return Object(h.jsx)("canvas",Object(u.a)(Object(u.a)({},s),{},{ref:o,onMouseMove:x,onMouseOut:function(){return a([1/0,1/0])},width:O,height:m,className:f()(s.className,"has-background-dark"),onClick:y}))};var Xe=n(39),Ke=n(172),Qe=n(662),Ve=n(663),Ze=n(664),et=n(665),tt=n(666),nt=n(667);var ct,rt=function e(){var t=this;Object(Xe.a)(this,e),this.nodes=[],this.links=[],this.runs=!1,this.simulation=Object(Ke.a)().alphaDecay(.005).force("link",Object(Qe.a)().id((function(e){return e.uri})).distance(50).strength(.1)).force("linkGravity",function(){var e=[],t=3;function n(n){var c=t*n;e.forEach((function(e){var t=e.source,n=e.target;if("object"===typeof t&&"object"===typeof n&&t.y&&n.y&&t.vy&&n.vy&&t.y<n.y+50){var r=(n.y+50-t.y)/50;t.vy+=c*r,n.vy-=c*r}}))}return n.links=function(t){return e=t,n},n.strength=function(e){return t=e,n},n}().strength(50)).force("charge",Object(Ve.a)().strength(-150).distanceMax(500)).force("gravityX",Object(Ze.a)(0).strength(.01)).force("gravityY",Object(et.a)(0).strength(.01)).force("collide",Object(tt.a)((function(e){return e.r+5}))).force("center",Object(nt.a)(0,0)).stop(),this.start=function(e){var n=e.nodes,c=e.links,r=e.onTick;t.nodes=n,t.links=c.map((function(e){return Object(u.a)({},e)})),t.simulation.nodes(t.nodes),t.simulation.force("link").links(t.links),t.simulation.force("linkGravity").links(t.links),t.simulation.on("tick",(function(){r({nodes:t.nodes,links:t.links})})),t.simulation.restart(),t.runs=!0},this.stop=function(){return t.runs=!1,t.simulation.stop()},this.update=function(e){var n=e.nodes,c=e.links;t.simulation.stop();var r=Object.fromEntries(t.nodes.map((function(e){return[e.uri,e]}))),a=n.map((function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},e),{},{x:800*(.5-Math.random()),y:800*(.5-Math.random())},r[e.uri]),{},{r:e.r})}));t.nodes=a,t.links=c.map((function(e){return Object(u.a)({},e)})),t.simulation.nodes(t.nodes),t.simulation.force("link").links(t.links),t.simulation.force("linkGravity").links(t.links),t.simulation.alpha(1).restart()},this.selectNode=function(e){var n=e.x,c=e.y;return t.simulation.find(n,c,40)}},at=(n(518),n(282)),it=n.n(at),st=n(283),ot=n.n(st),ut=n(284),lt=n.n(ut),dt=b.a.div(ct||(ct=Object(o.a)(["\n  img {\n    max-width: 100%;\n  }\n"])));function bt(e){var t={children:e.children,remarkPlugins:[ot.a],rehypePlugins:[lt.a]};return Object(h.jsx)(dt,{children:Object(h.jsx)(it.a,Object(u.a)({},t))})}var jt,ft,ht,pt,Ot,mt,vt,gt,xt=n(285),yt=n.n(xt),kt=Object(P.c)({name:"search",initialState:{query:"",queryAutocomplete:""},reducers:{setSearch:function(e,t){e.query=t.payload},setAutocomplete:function(e,t){e.queryAutocomplete=t.payload}}}),wt=kt.actions,Nt=wt.setSearch,Ct=wt.setAutocomplete,Et=function(e){return e.search.query},It=Object(M.a)(Et,re,(function(e,t){return e.length<2?[]:Object.values(t).filter((function(t){return t.label.en.toLowerCase().includes(e.toLowerCase())})).sort((function(e,t){var n=e.dependents,c=t.dependents;return Object.values(c).length-Object.values(n).length})).map((function(e){return{value:e.uri,label:e.label.en}})).slice(0,10)})),St=Object(M.a)((function(e){return e.search.queryAutocomplete}),re,(function(e,t){return e.length<2?[]:Object.values(t).filter((function(t){return t.label.en.toLowerCase().includes(e.toLowerCase())})).sort((function(e,t){var n=e.dependents,c=t.dependents;return Object.values(c).length-Object.values(n).length})).slice(0,10)})),Lt=kt.reducer,Pt=(n(656),function(e){var t=e.title,n=e.node,c=e.nodes,a=e.onFinish,i=Object(r.useState)(Object.values(n.dependencies)),s=Object(l.a)(i,2),o=s[0],u=s[1],d=N();Object(r.useEffect)((function(){u(Object.values(n.dependencies))}),[n]);var b=function(){a(),u(Object.values(n.dependencies))},j=Object.values(o).map((function(e){return{id:e.uri,name:e.label.en}})),f=C(St),p=f.map((function(e){var t=e.label;return{id:e.uri,name:t.en}}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"card-header",children:[Object(h.jsxs)("p",{className:"card-header-title",children:[t,": ",c.length]}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"cancel editing",title:"cancel editing",onClick:b,children:Object(h.jsx)("i",{className:"icon icon-cancel has-text-danger","aria-hidden":"true"})}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"save changes",title:"save changes",onClick:function(){d(Z({dependencies:o.map((function(e){return e.uri})),id:n.uri,document:n.document.id})),b()},children:Object(h.jsx)("i",{className:"icon icon-ok has-text-success","aria-hidden":"true"})})]}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)(yt.a,{suggestions:p,tags:j,onInput:function(e){return d(Ct(e))},onAddition:function(e){var t=f.find((function(t){return t.uri===e.id}));t&&u((function(e){return[].concat(Object(_e.a)(e),[t])}))},onDelete:function(e){u((function(t){return t.filter((function(t,n){return n!==e}))}))},classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected tags",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled"},allowBackspace:!1,tagComponent:Mt})})]})}),Mt=function(e){var t=e.tag,n=e.removeButtonText,c=e.onDelete;return Object(h.jsxs)("span",{className:"tag is-info",children:[t.name,Object(h.jsx)("button",{title:n,onClick:c,className:"delete is-small"})]})},Dt=function(e){var t=e.title,n=e.node,c=e.nodes,a=e.editable,i=void 0!==a&&a,s=Object(r.useState)(!1),o=Object(l.a)(s,2),u=o[0],d=o[1],b=N();return u?Object(h.jsx)(Pt,{title:t,node:n,nodes:c,onFinish:function(){return d(!1)}}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"card-header",children:[Object(h.jsxs)("p",{className:"card-header-title",children:[t,": ",c.length]}),n.document.access.user.write&&i&&Object(h.jsx)("button",{className:"card-header-icon","aria-label":"edit label",onClick:function(){return d(!0)},children:Object(h.jsx)("i",{className:"icon icon-edit","aria-hidden":"true"})})]}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)("ul",{className:"buttons are-small",children:c.map((function(e){return Object(h.jsx)("li",{onClick:function(){return b(ce(e.uri))},onMouseEnter:function(){return b(ne(e.uri))},onMouseLeave:function(){return b(ne(""))},className:"button is-link is-inverted",children:e.label.en},e.uri)}))})})]})},Ft=function(e){var t=e.node,n=e.onFinish,c=Object(r.useState)(t.label.en),a=Object(l.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(t.type),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(r.useState)(!1),f=Object(l.a)(j,2),p=f[0],O=f[1],m=N();Object(r.useEffect)((function(){s(t.label.en),b(t.type)}),[t]);var v=function(){n(),O(!1),s(t.label.en),b(t.type)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{className:"card-header-title",children:[Object(h.jsx)("input",{className:"input is-small",type:"text",placeholder:"label",value:i,onChange:function(e){return s(e.target.value)},size:10}),Object(h.jsx)("div",{className:"tags",children:p?["definition","statement"].map((function(e){return Object(h.jsx)("span",{className:"tag is-info is-light",onClick:function(){return function(e){O(!1),b(e)}(e)},children:e},e)})):Object(h.jsxs)("span",{className:"tag is-info",children:[d,Object(h.jsx)("button",{className:"delete is-small",onClick:function(){return O(!0)}})]})})]}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"cancel editing",title:"cancel editing",onClick:v,children:Object(h.jsx)("i",{className:"icon icon-cancel has-text-danger","aria-hidden":"true"})}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"save changes",title:"save changes",onClick:function(){m(Z({type:d,label:{en:i},id:t.uri,document:t.document.id})),v()},children:Object(h.jsx)("i",{className:"icon icon-ok has-text-success","aria-hidden":"true"})})]})},Tt=function(e){var t=e.node,n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],i=c[1];return a?Object(h.jsx)(Ft,{node:t,onFinish:function(){return i(!1)}}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{className:"card-header-title",children:[Object(h.jsx)("a",{href:t.uri,children:t.label.en}),Object(h.jsx)("span",{className:"tag is-info",children:t.type})]}),t.document.access.user.write&&Object(h.jsx)("button",{className:"card-header-icon","aria-label":"edit label",onClick:function(){return i(!0)},children:Object(h.jsx)("i",{className:"icon icon-edit","aria-hidden":"true"})})]})},At=function(){var e=N(),t=C(ue),n=Object.values(t.dependencies),c=Object.values(t.dependents);return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("header",{className:"card-header",children:[Object(h.jsx)(Tt,{node:t}),Object(h.jsx)("span",{className:"card-header-icon",children:Object(h.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return e(ce(""))},children:"close"})})]}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)(qt,{node:t})}),Object(h.jsx)(Dt,{title:"dependencies",node:t,nodes:n,editable:!0}),Object(h.jsx)(Dt,{title:"dependents",node:t,nodes:c})]})},qt=function(e){var t=e.node,n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],i=c[1];return a?Object(h.jsx)(_t,{node:t,onFinish:function(){return i(!1)}}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(bt,{children:t.description.en}),t.document.access.user.write&&Object(h.jsx)("button",{className:"card-header-icon","aria-label":"edit label",onClick:function(){return i(!0)},children:Object(h.jsx)("i",{className:"icon icon-edit","aria-hidden":"true"})})]})},_t=function(e){var t=e.node,n=e.onFinish,c=Object(r.useState)(t.description.en),a=Object(l.a)(c,2),i=a[0],s=a[1],o=N();Object(r.useEffect)((function(){s(t.description.en)}),[t]);var u=function(){n(),s(t.description.en)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("span",{className:"has-text-grey is-size-7",children:["You can use"," ",Object(h.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",children:"Markdown"})," and"," ",Object(h.jsx)("a",{href:"http://asciimath.org/",children:"AsciiMath"})," (use $inline math$ and $$multiline math$$)."]}),Object(h.jsx)("textarea",{className:"textarea",placeholder:"description",value:i,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)(bt,{children:i}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"cancel editing",title:"cancel editing",onClick:u,children:Object(h.jsx)("i",{className:"icon icon-cancel has-text-danger","aria-hidden":"true"})}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"save changes",title:"save changes",onClick:function(){o(Z({description:{en:i},id:t.uri,document:t.document.id})),u()},children:Object(h.jsx)("i",{className:"icon icon-ok has-text-success","aria-hidden":"true"})})]})},Rt=b.a.div(jt||(jt=Object(o.a)(["\n  position: fixed;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  pointer-events: none;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),Wt=b.a.div(ft||(ft=Object(o.a)(["\n  pointer-events: all;\n  overflow-x: auto;\n  width: 100%;\n"]))),zt=function(e){var t=e.children;return Object(h.jsx)(Rt,{children:Object(h.jsx)("div",{className:"columns mr-1 mt-6",children:Object(h.jsx)("div",{className:"column is-one-quarter is-offset-three-quarters",children:Object(h.jsx)(Wt,{children:t})})})})},Bt=function(e,t){var n=We.a.dot(e,We.a.transpose([[].concat(Object(_e.a)(t),[1])])),c=Object(l.a)(n,2);return[Object(l.a)(c[0],1)[0],Object(l.a)(c[1],1)[0]]},$t=function(e){var t,n=null!==(t=Object.entries(e.dependents).length)&&void 0!==t?t:0;return n=n<1?1:n,5*Math.pow(n,.42)},Gt={origin:[0,0],distance:20,highlight:5},Ut=function(e){var t=C(ae),n=C(ie),c=C(se),a=C(oe),i=N(),s=Object(r.useState)(new rt),o=Object(l.a)(s,1)[0],d=Object(r.useState)({nodes:[],links:[]}),b=Object(l.a)(d,2),j=b[0],f=b[1],p=Object(r.useState)([[1,0,0],[0,1,0],[0,0,1]]),O=Object(l.a)(p,2),m=O[0],v=O[1];Object(r.useEffect)((function(){var e=Date.now()-20;return o.start({nodes:[],links:[],onTick:function(t){var n=t.nodes,c=t.links,r=Date.now();r>e+20&&(f({nodes:Object(_e.a)(n),links:Object(_e.a)(c)}),e=r)}}),function(){o.stop()}}),[o]),Object(r.useEffect)((function(){var e=Object.values(t).map((function(e){return{label:e.label.en,x:400*Math.random(),y:400*Math.random(),r:$t(e),uri:e.uri}})),n=Object.values(t).reduce((function(e,t){var n=t.uri,c=t.dependencies;return Object.keys(c).forEach((function(t){return e.push({source:n,target:t})})),e}),[]);o.update({nodes:e,links:n})}),[t,o]);var g=function(e){return function(t){var n,c=Bt(We.a.inv(m),t),r=Object(l.a)(c,2),a=r[0],i=r[1];e(null===(n=o.selectNode({x:a,y:i}))||void 0===n?void 0:n.uri)}},x=g((function(e){return i(ne(e))})),y=g((function(e){return i(ce(e))})),k=function(e,t,n,c,r){var a=Object.fromEntries(t.nodes.map((function(t){var n=Bt(e,[t.x,t.y]),c=Object(l.a)(n,2),r=c[0],a=c[1],i=e[0][0]*t.r;return[t.uri,Object(u.a)(Object(u.a)({},t),{},{x:r,y:a,r:i,style:""})]})));r.forEach((function(e){return a[e].style="focus2"})),n&&a[n]&&(a[n].style="accent"),c&&(a[c].style="focus");var i=t.links.map((function(e){var n="string"===typeof e.source?e.source:"number"===typeof e.source?t.nodes[e.source].uri:e.source.uri,c="string"===typeof e.target?e.target:"number"===typeof e.target?t.nodes[e.target].uri:e.target.uri;return{source:a[n],target:a[c]}}));return{nodes:Object.values(a),links:i}}(m,j,n,c,a),w=function(e,t){for(var n=t.distance*e[0][0];n<20;)n*=5;return{origin:Bt(e,t.origin),distance:n,highlight:t.highlight}}(m,Gt);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Je,Object(u.a)({graph:k,grid:w,onTransform:function(e){v((function(t){return We.a.dot(e,t)}))},onHover:x,onSelectNode:y},e)),Object(h.jsx)(zt,{children:c&&Object(h.jsx)(At,{})})]})},Ht=b.a.a(ht||(ht=Object(o.a)(["\n  color: lightgray;\n  &:hover {\n    color: white;\n  }\n"]))),Yt=b.a.footer(pt||(pt=Object(o.a)(["\n  color: gray;\n"]))),Jt=function(e){return Object(h.jsx)("div",Object(u.a)(Object(u.a)({},e),{},{children:Object(h.jsxs)(Yt,{children:["powered by ",Object(h.jsx)(Ht,{href:"https://solidproject.org",children:"Solid"})," \xb7"," ",Object(h.jsx)(Ht,{href:"https://github.com/livegraph-org/solid-math",children:"source"})]})}))},Xt=y((function(e){var t=Object.assign({},e);return Object(h.jsx)("a",Object(u.a)(Object(u.a)({},t),{},{children:"Add Document"}))}),(function(e){var t=e.onFinish,n=void 0===t?function(){}:t,c=C(Le),a=N(),i=Object(r.useState)(!0),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),j=b[0],f=b[1];return Object(h.jsx)("section",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(he({uri:"".concat(c).concat(o?"public":"private","/math/").concat(j,".ttl"),isPublic:o})),n()},children:[Object(h.jsxs)("div",{className:"field buttons are-small has-addons",children:[Object(h.jsx)("input",{className:"button".concat(o?" is-success":""),type:"button",value:"Public",onClick:function(){return u(!0)}}),Object(h.jsx)("input",{className:"button".concat(o?"":" is-warning"),type:"button",value:"Private",onClick:function(){return u(!1)}})]}),Object(h.jsxs)("div",{className:"field",children:[c,o?"public":"private","/math/",Object(h.jsx)("input",{type:"text",value:j,placeholder:"set-theory",onChange:function(e){return f(e.target.value)}}),".ttl"]}),Object(h.jsxs)("div",{className:"field buttons",children:[Object(h.jsx)("input",{className:"button is-success",type:"submit",value:"Create"}),Object(h.jsx)("input",{className:"button is-danger",type:"reset",value:"Cancel",onClick:n})]})]})})}),"Add a document"),Kt=Te((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-plus","aria-label":"add"})}))}),(function(e){var t=e.onAddMath,n=e.onClickClose;return Object(h.jsx)("div",{className:"menu box p-0",children:Object(h.jsxs)("ul",{className:"menu-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)(Xt,{buttonProps:{onClick:n}})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{onClick:function(){n(),t()},children:"Add Math"})})]})})})),Qt=function(e){var t="";return e.read&&(t+="R"),e.write&&(t+="W"),e.append&&(t+="A"),t},Vt=function(e){var t=Qt(e.user);return e.public&&(t+=" ",t+=Qt(e.public)),t||"none"},Zt=y((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-document","aria-label":"Math Documents"})}))}),(function(){var e=C(me),t=C(ve),n=N();return Object(h.jsx)("ul",{children:e.map((function(e){var c=e.uri,r=e.access;return Object(h.jsx)("li",{children:Object(h.jsxs)("button",{className:f()("button is-small",c===t&&"is-success"),disabled:!(r.user.write||r.user.append),onClick:function(){return n(Oe(c))},children:[c," ",Vt(r)]})},c)}))})}),"Math Documents"),en=function(e){var t=Object.assign({},e);return Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},t),{},{children:[Object(h.jsx)(O,{"aria-label":"people",onClick:function(){return alert("people control not implemented")},children:Object(h.jsx)("i",{className:"icon icon-users"})}),Object(h.jsx)(Zt,{}),Object(h.jsx)(Kt,{buttonProps:{},menuProps:{onAddMath:function(){return console.log("add math")}}})]}))},tn=function(e){var t=Object.assign({},e),n=C(Et),c=C(It),a=N(),i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],d=s[1],b=Object(r.useCallback)((function(){d(!1),a(Nt(""))}),[a]);return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&b()};return document.addEventListener("keydown",e,!1),function(){return document.removeEventListener("keydown",e,!1)}}),[b]),o?Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},t),{},{className:"box p-0",children:[Object(h.jsxs)("p",{className:"control has-icons-right",children:[Object(h.jsx)("input",{autoFocus:!0,type:"text",className:"input",placeholder:"Search",value:n,onChange:function(e){return a(Nt(e.target.value))}}),Object(h.jsx)("span",{className:"icon is-right",children:Object(h.jsx)("i",{className:"icon icon-search"})})]}),Object(h.jsx)("div",{className:"menu",children:Object(h.jsx)("ul",{className:"menu-list",children:c.map((function(e){var t=e.value,n=e.label;return Object(h.jsx)("li",{title:t,onMouseEnter:function(){return a(ne(t))},onMouseLeave:function(){return a(ne(""))},children:Object(h.jsx)("a",{onClick:function(){a(ce(t)),b()},children:n})},t)}))})})]})):Object(h.jsx)(O,{onClick:function(){return d(!0)},children:Object(h.jsx)("i",{className:"icon icon-search"})})},nn=["info","onClose"],cn=function(e){var t=e.info,n=e.onClose,c=Object(d.a)(e,nn);if(!t.message)return null;var r="success"===t.type?"success":"error"===t.type?"danger":"info";return Object(h.jsx)("div",Object(u.a)(Object(u.a)({},c),{},{children:Object(h.jsxs)("div",{className:f()("notification","is-".concat(r)),children:[Object(h.jsx)("button",{className:"delete",onClick:n}),t.message]})}))},rn=function(e){var t=Object.assign({},e),n=C(R),c=N();return Object(h.jsx)(cn,Object(u.a)({info:n,onClose:function(){return c(_())}},t))},an=Object(b.a)(Jt)(Ot||(Ot=Object(o.a)(["\n  position: fixed;\n  bottom: 1rem;\n  right: 1rem;\n"]))),sn=Object(b.a)(rn)(mt||(mt=Object(o.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  left: 0.5rem;\n"]))),on=Object(b.a)(Ut)(vt||(vt=Object(o.a)(["\n  height: 100vh;\n  width: 100vw;\n  display: block;\n"]))),un=b.a.nav(gt||(gt=Object(o.a)(["\n  display: flex;\n  position: absolute;\n  width: 100%;\n  pointer-events: none;\n  justify-content: space-between;\n  & > * {\n    pointer-events: all;\n  }\n  padding: 1rem;\n"]))),ln=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(un,{children:[Object(h.jsx)(en,{}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(tn,{style:{display:"inline-block",position:"relative",zIndex:2}}),Object(h.jsx)(qe,{})]})]}),Object(h.jsx)(an,{}),Object(h.jsx)(sn,{}),Object(h.jsx)(on,{})]})},dn=function(){var e=N();return Object(r.useEffect)((function(){e(we())}),[e]),Object(h.jsx)(ln,{})},bn=Object(P.a)({reducer:{login:Me,math:le,search:Lt,document:ge,info:W}}),jn=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,694)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};if("object"===typeof document){var fn=document.querySelector("#root");v.a.setAppElement(fn)}s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(w.a,{store:bn,children:Object(h.jsx)(dn,{})})}),document.getElementById("root")),jn()}},[[657,1,2]]]);
//# sourceMappingURL=main.f0cedfad.chunk.js.map