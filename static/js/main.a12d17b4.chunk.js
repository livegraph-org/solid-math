(this.webpackJsonpmath=this.webpackJsonpmath||[]).push([[0],{300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},502:function(e,t){},657:function(e,t,n){},658:function(e,t,n){"use strict";n.r(t);var c,r=n(2),a=n.n(r),i=n(81),s=n.n(i),o=(n(300),n(301),n(302),n(27)),u=n(4),l=n(5),d=n(30),b=n(28),j=n(42),f=n.n(j),h=n(1),p=["children","className"],O=Object(b.a)((function(e){var t=e.children,n=e.className,c=Object(d.a)(e,p);return Object(h.jsx)("button",Object(u.a)(Object(u.a)({className:f()(n,"button")},c),{},{children:t}))}))(c||(c=Object(o.a)(["\n  &:not(:hover) {\n    background-color: #0000;\n    border-color: #0000;\n    color: #fff;\n  }\n  &:hover {\n  }\n  &:active {\n    background-color: #eee;\n  }\n"]))),v=n(113),m=n.n(v),g=["buttonProps","contentProps","title"];function x(e){return e.displayName||e.name||"Component"}var y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=function(c){var a=c.buttonProps,i=void 0===a?{}:a,s=c.contentProps,o=void 0===s?{}:s,b=c.title,j=void 0===b?"":b,p=Object(d.a)(c,g),O=Object(r.useState)(!1),v=Object(l.a)(O,2),x=v[0],y=v[1],w=j||n||"";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(e,Object(u.a)(Object(u.a)(Object(u.a)({},i),p),{},{className:f()(null===i||void 0===i?void 0:i.className,null===p||void 0===p?void 0:p.className),onClick:function(e){e.preventDefault(),y(!0),i.onClick&&i.onClick(e)}})),x&&Object(h.jsxs)(m.a,{isOpen:x,onRequestClose:function(){return y(!1)},contentLabel:w,overlayClassName:{base:"modal modal-background is-active",afterOpen:"",beforeClose:""},className:{base:"modal-content",afterOpen:"",beforeClose:""},closeTimeoutMS:50,children:[Object(h.jsx)("button",{className:"modal-close",onClick:function(){return y(!1)},children:"close"}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("header",{className:"card-header",children:Object(h.jsx)("p",{className:"card-header-title",children:w})}),Object(h.jsx)("div",{className:"card-content",children:Object(h.jsx)(t,Object(u.a)(Object(u.a)({},o),{},{onFinish:function(){return y(!1)}}))})]})]})]})};return c.displayName="WithModal(".concat(x(e),")"),c},w=y((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:"Login"}))}),(function(e){var t,n=e.onLogin,c=Object(r.useState)(null!==(t=localStorage.getItem("idp"))&&void 0!==t?t:"https://solidcommunity.net"),a=Object(l.a)(c,2),i=a[0],s=a[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("idp",i),n(i)},children:[Object(h.jsx)("div",{className:"field",children:Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("input",{id:"idp",className:"input",type:"url",value:i,onChange:function(e){e.preventDefault();var t=e.currentTarget.value;s(t)},placeholder:"Where is your Solid Pod?"})})}),Object(h.jsx)("div",{className:"field",children:Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("input",{type:"submit",value:"Connect",className:"button is-link"})})})]})}),"Select your Solid identity provider"),k=n(86),N=function(){return Object(k.b)()},C=k.c,E=n(277),I=n(0),S=n.n(I),L=n(3),D=n(13),M=n(112),P={message:"",type:"info"},T=function(e){return function(){var t=Object(L.a)(S.a.mark((function t(n,c){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(q(e)),t.next=3,new Promise((function(e){setTimeout(e,5e3)}));case 3:(r=R(c())).message===e.message&&r.type===e.type&&n(_());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},A=Object(D.c)({name:"info",initialState:P,reducers:{setInfo:function(e,t){return t.payload},clearInfo:function(){return P}}}),F=A.actions,q=F.setInfo,_=F.clearInfo,R=function(e){return e.info},W=A.reducer,U=n(20),z=n(119),B=n.n(z);var $,G=function(e){var t=new B.a.Graph;Object.values(e).forEach((function(e){t.setNode(e.uri),Object.values(e.dependencies).forEach((function(n){return t.setEdge(e.uri,n.uri)}))}));var n=Object.fromEntries(Object.entries(e).map((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return[n,Object(u.a)(Object(u.a)({},c),{},{dependencies:{}})]})));return function(e){if(!B.a.alg.isAcyclic(e))throw new Error("pruning is possible on DAG only");return e.edges().forEach((function(t){e.removeEdge(t),B.a.alg.dijkstra(e,t.v)[t.w].distance===1/0&&e.setEdge(t)})),e}(t).edges().map((function(e){return{source:e.v,target:e.w}})).forEach((function(e){var t=e.source,c=e.target;n[t].dependencies[c]=n[c]})),n},H=n(7),Y=n(14),J=n(15),X={definition:"https://terms.math.livegraph.org#Definition",statement:"https://terms.math.livegraph.org#Statement",dependsOn:"https://terms.math.livegraph.org#dependsOn"},Z=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t,{fetch:Y.fetch});case 2:return n=e.sent,c=Object(H.k)(n),r={nodes:[],links:[]},c.forEach((function(e){var n=te(e,t);r.nodes.push(n),Object(H.i)(e,X.dependsOn).forEach((function(e){r.links.push([n.id,e.value])}))})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t.document,{fetch:Y.fetch});case 2:if(n=e.sent,!(c=Object(H.j)(n,t.id))){e.next=15;break}if(r=c,t.label&&(r=Object(H.r)(r,J.c.label,t.label.en,"en")),t.type&&(r=Object(H.t)(r,J.b.type,X[t.type])),t.description&&(r=Object(H.r)(r,J.b.value,t.description.en,"en")),t.dependencies&&(r=Object(H.n)(r,X.dependsOn),t.dependencies.forEach((function(e){r=Object(H.a)(r,X.dependsOn,e)}))),r===c){e.next=14;break}return a=Object(H.s)(n,r),e.next=14,Object(H.q)(t.document,a,{fetch:Y.fetch});case 14:return e.abrupt("return",te(r,t.document));case 15:throw new Error("node to update not found");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t.document,{fetch:Y.fetch});case 2:return n=e.sent,c=V(t.document,n,t.label.en),r=Object(H.c)({url:c}).setStringWithLocale(J.c.label,t.label.en,"en").setUrl(J.b.type,X[t.type]).setStringWithLocale(J.b.value,t.description.en,"en"),t.dependencies.forEach((function(e){r.addUrl(X.dependsOn,e)})),a=r.build(),i=Object(H.s)(n,a),e.next=10,Object(H.q)(t.document,i,{fetch:Y.fetch});case 10:return e.abrupt("return",te(a,t.document));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e,t,n){for(var c="".concat(e,"#").concat(function(e){return e.toLowerCase().trim().replace(/[^a-z0-9.\s_-]/g,"").trim().replace(/\s/g,"_").replace(/\./g,"_")}(n)),r=function(e){return e>0?"".concat(c,"_").concat(e):c},a=0;Object(H.j)(t,r(a));)a++;return r(a)},ee=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t.document.uri,{fetch:Y.fetch});case 2:if(n=e.sent,c=Object(H.j)(n,t.uri),r=Object(H.k)(n).filter((function(e){return e.url!==t.uri})).filter((function(e){return Object(H.l)(e,X.dependsOn)})).map((function(e){return Object(H.p)(e,X.dependsOn,t.uri)})),!c){e.next=10;break}return a=Object(H.o)(n,c),r.forEach((function(e){a=Object(H.s)(a,e)})),e.next=10,Object(H.q)(t.document.uri,a,{fetch:Y.fetch});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){var n,c,r,a,i,s,o=Object(H.b)(e),u=null!==(n=null===(c=Object(H.h)(e,J.b.type))||void 0===c?void 0:c.value)&&void 0!==n?n:"",l=null!==(r=null===(a=Object(H.h)(e,J.b.value))||void 0===a?void 0:a.value)&&void 0!==r?r:"",d=null!==(i=null===(s=Object(H.h)(e,J.c.label))||void 0===s?void 0:s.value)&&void 0!==i?i:"",b=Object(H.m)(e,X.dependsOn);switch(u){case X.definition:return{id:o,type:"definition",label:{en:d},description:{en:l},dependencies:b,dependents:[],examples:[],created:0,updated:0,document:t};case X.statement:return{id:o,type:"statement",label:{en:d},description:{en:l},dependencies:b,dependents:[],examples:[],proofs:[],created:0,updated:0,document:t};default:throw new Error("thing is not a Definition or Statement")}},ne=["id","document"],ce=Object(D.b)("math/addGraph",function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(D.b)("math/updateNode",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=n.dispatch)(T({type:"info",message:"saving ..."})),e.prev=2,e.next=5,K(t);case 5:return r=e.sent,c(T({type:"success",message:"... saved"})),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(2),a="updating failed",e.t0 instanceof Error&&(a+=": ".concat(e.t0.message)),c(T({type:"error",message:a})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(D.b)("math/createNode",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=n.dispatch)(T({type:"info",message:"saving ..."})),e.prev=2,e.next=5,Q(t);case 5:return r=e.sent,c(T({type:"success",message:"... saved"})),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(2),a="creating failed",e.t0 instanceof Error&&(a+=": ".concat(e.t0.message)),c(T({type:"error",message:a})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(D.b)("math/deleteNode",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=n.dispatch)(T({type:"info",message:"deleting ..."})),e.prev=2,e.next=5,ee(t);case 5:return c(T({type:"success",message:"... deleted"})),e.abrupt("return",Object(u.a)(Object(u.a)({},t),{},{id:t.uri,dependencies:Object.keys(t.dependencies),dependents:Object.keys(t.dependents),document:t.document.uri}));case 9:throw e.prev=9,e.t0=e.catch(2),r="deleting failed",e.t0 instanceof Error&&(r+=": ".concat(e.t0.message)),c(T({type:"error",message:r})),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(D.c)({name:"math",initialState:{entities:{node:{byId:{},allIds:[]}},ui:{highlighted:"",selected:"",create:!1}},reducers:{highlight:function(e,t){e.ui.highlighted=t.payload},select:function(e,t){e.ui.selected=t.payload},createMath:function(e,t){e.ui.create=t.payload}},extraReducers:function(e){e.addCase(ce.fulfilled,(function(e,t){var n=t.payload,c=n.nodes,r=n.links;c.forEach((function(t){e.entities.node.byId[t.id]=Object(u.a)(Object(u.a)({},t),{},{dependencies:[]}),e.entities.node.allIds.push(t.id)})),r.forEach((function(t){var n=Object(l.a)(t,2),c=n[0],r=n[1];e.entities.node.byId[r]&&e.entities.node.byId[c]&&(e.entities.node.byId[r].dependents.push(c),e.entities.node.byId[c].dependencies.push(r))}))})).addCase(ie.fulfilled,(function(e,t){var n=t.payload,c=n.dependents,r=n.dependencies,a=n.id;c.forEach((function(t){var n=e.entities.node.byId[t].dependencies.filter((function(e){return e!==a}));e.entities.node.byId[t].dependencies=n})),r.forEach((function(t){e.entities.node.byId[t].dependents=e.entities.node.byId[t].dependents.filter((function(e){return e!==a}))})),delete e.entities.node.byId[a],e.entities.node.allIds=e.entities.node.allIds.filter((function(e){return e!==a})),e.ui.selected=""})).addMatcher(Object(D.d)(re.fulfilled,ae.fulfilled),(function(e,t){var n,c,r,a=t.payload;e.entities.node.allIds.includes(a.id)||(e.entities.node.allIds.push(a.id),e.entities.node.byId[a.id]=a),e.entities.node.byId[a.id].label=a.label,e.entities.node.byId[a.id].type=a.type,e.entities.node.byId[a.id].description=a.description,e.entities.node.byId[a.id].dependencies=a.dependencies;var i=null!==(n=null===(c=Object(U.f)(e))||void 0===c||null===(r=c.entities.node.byId[a.id])||void 0===r?void 0:r.dependencies)&&void 0!==n?n:[],s=i.filter((function(e){return!a.dependencies.includes(e)}));a.dependencies.filter((function(e){return!i.includes(e)})).forEach((function(t){e.entities.node.byId[t].dependents.push(a.id)})),s.forEach((function(t){e.entities.node.byId[t].dependents=e.entities.node.byId[t].dependents.filter((function(e){return e!==a.id}))})),e.ui.selected=a.id}))}}),oe=se.actions,ue=oe.highlight,le=oe.select,de=oe.createMath,be=Object(M.a)((function(e){return e.math.entities.node}),(function(e){return e.document.entities.document}),(function(e,t){var n=e.byId,c=t.byId,r=Object.fromEntries(Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1],a=r.id,i=r.document,s=Object(d.a)(r,ne);return[n,Object(u.a)(Object(u.a)({},s),{},{uri:a,dependencies:{},dependents:{},document:c[i]})]})));return Object.entries(r).forEach((function(e){var t=Object(l.a)(e,2),c=t[0],a=t[1];a.dependencies=Object.fromEntries(n[c].dependencies.map((function(e){return[e,r[e]]}))),a.dependents=Object.fromEntries(n[c].dependents.map((function(e){return[e,r[e]]})))})),r})),je=Object(M.a)(be,(function(e){return G(e)})),fe=function(e){return e.math.ui.highlighted},he=function(e){return e.math.ui.selected},pe=function(e){return e.math.ui.create},Oe=Object(M.a)(he,be,(function(e,t){var n,c;return e?Object.values(null!==(n=null===(c=t[e])||void 0===c?void 0:c.dependencies)&&void 0!==n?n:{}).map((function(e){return e.uri})):[]})),ve=Object(M.a)(he,be,(function(e,t){return t[e]})),me=se.reducer,ge=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t){e.next=13;break}return e.next=4,ye(t);case 4:if(c=e.sent,!(r=c.public)){e.next=13;break}return e.next=9,Object(H.g)(r,{fetch:Y.fetch});case 9:a=e.sent,i=Object(H.k)(a),s=i.filter((function(e){return Object(H.i)(e,J.d.forClass).map((function(e){return e.value})).includes("https://terms.math.livegraph.org#Definition")})).map((function(e){return Object(H.i)(e,J.d.instance)})).flat().map((function(e){return e.value})),n=s;case 13:return 0===n.length&&(n=["https://mrkvon.solidcommunity.net/public/math/graph-theory.ttl"]),e.t0=Object,e.next=17,Promise.all(n.map(function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t,{fetch:Y.fetch});case 2:return n=e.sent,c=Object(H.f)(n),e.abrupt("return",[t,c]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return e.t1=e.sent,o=e.t0.fromEntries.call(e.t0,e.t1),e.abrupt("return",n.map((function(e){return{id:e,uri:e,access:o[e]}})));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(L.a)(S.a.mark((function e(t,n,c){var r,a,i,s,o,u,l,d,b,j,f;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(H.g)(t,{fetch:Y.fetch});case 3:e.next=29;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(H.q)(t,Object(H.d)(),{fetch:Y.fetch});case 9:return e.next=11,Object(H.g)(t,{fetch:Y.fetch});case 11:return r=e.sent,a={id:t,uri:t,access:Object(H.f)(r)},e.next=15,ye(n);case 15:if(i=e.sent,!(s=c?i.public:i.private)){e.next=28;break}return e.next=20,Object(H.g)(s,{fetch:Y.fetch});case 20:return u=e.sent,l=null!==(o=Object(H.j)(u,s))&&void 0!==o?o:Object(H.e)({url:s}),d="".concat(s,"#").concat(Date.now()),b=Object(H.c)(l).addUrl(J.a.references,d).build(),j=Object(H.c)(Object(H.e)({url:d})).addUrl(J.b.type,J.d.TypeRegistration).addUrl(J.d.forClass,"https://terms.math.livegraph.org#Definition").addUrl(J.d.forClass,"https://terms.math.livegraph.org#Statement").addUrl(J.d.instance,t).build(),f=Object(H.s)(Object(H.s)(u,b),j),e.next=28,Object(H.q)(s,f,{fetch:Y.fetch});case 28:return e.abrupt("return",a);case 29:throw new Error("document already exists");case 30:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,c){return e.apply(this,arguments)}}(),ye=function(){var e=Object(L.a)(S.a.mark((function e(t){var n,c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.g)(t,{fetch:Y.fetch});case 2:return n=e.sent,c=Object(H.j)(n,t),r={public:"",private:""},c&&(r.public=null!==(a=null===(i=Object(H.h)(c,J.d.publicTypeIndex))||void 0===i?void 0:i.value)&&void 0!==a?a:"",r.private=null!==(s=null===(o=Object(H.h)(c,J.d.privateTypeIndex))||void 0===o?void 0:o.value)&&void 0!==s?s:""),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=Object(D.b)("math/addDocuments",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,ge(t);case 3:return(r=e.sent).forEach((function(e){return c(ce(e.uri))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ke=Object(D.b)("math/createDocument",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.uri,r=t.isPublic,a=n.getState,i=n.dispatch,s=Re(a()),e.prev=3,i(T({type:"info",message:"creating a new document"})),e.next=7,xe(c,s,r);case 7:return o=e.sent,i(T({type:"success",message:"created a new document"})),e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(3),e.t0 instanceof Error&&i(T({type:"error",message:e.t0.message})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Ne=Object(D.c)({name:"document",initialState:{entities:{document:{byId:{},allIds:[]}},selected:""},reducers:{selectDocument:function(e,t){e.selected=t.payload}},extraReducers:function(e){e.addCase(we.fulfilled,(function(e,t){e.entities.document={byId:Object.fromEntries(t.payload.map((function(e){return[e.id,e]}))),allIds:t.payload.map((function(e){return e.id}))}})).addCase(ke.fulfilled,(function(e,t){e.entities.document.allIds.push(t.payload.id),e.entities.document.byId[t.payload.id]=t.payload}))}}),Ce=Ne.actions.selectDocument,Ee=Object(M.a)((function(e){return e.document.entities.document}),(function(e){var t=e.byId;return e.allIds.map((function(e){return t[e]}))})),Ie=($=["write","append"],Object(M.a)(Ee,(function(e){return e.filter((function(e){return $.some((function(t){return e.access.user[t]}))}))}))),Se=function(e){return e.document.selected},Le=Ne.reducer,De=function(){var e=Object(L.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Y.login)({oidcIssuer:t,redirectUrl:window.location.href,clientName:"Friends Crawler"});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),alert("Could not find a Solid Pod at ".concat(t)),localStorage.removeItem("idp");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.logout)();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=Object(D.b)("login/init",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var c,r,a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,De();case 3:return i=e.sent,s=null!==(c=null===i||void 0===i?void 0:i.webId)&&void 0!==c?c:"",o=null!==(r=null===i||void 0===i?void 0:i.isLoggedIn)&&void 0!==r&&r,a(we(s)),e.abrupt("return",{webId:s,isLoggedIn:o});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ae=Object(D.b)("login/login",function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(D.b)("login/logout",Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe();case 2:case"end":return e.stop()}}),e)})))),qe=Object(D.c)({name:"login",initialState:{webId:"",isLoggedIn:!1,status:"loading"},reducers:{},extraReducers:function(e){e.addCase(Te.pending,(function(e){e.status="loading"})).addCase(Te.fulfilled,(function(e,t){e.status="idle",e.webId=t.payload.webId,e.isLoggedIn=t.payload.isLoggedIn})).addCase(Ae.pending,(function(e){e.status="loading"})).addCase(Ae.fulfilled,(function(e){e.status="idle"})).addCase(Fe.pending,(function(e){e.status="loading"})).addCase(Fe.fulfilled,(function(e){e.status="idle",e.webId="",e.isLoggedIn=!1}))}}),_e=function(e){return{webId:e.login.webId,isLoggedIn:e.login.isLoggedIn}},Re=function(e){return e.login.webId},We=function(e){return e.login.isLoggedIn},Ue=Object(M.a)(Re,(function(e){var t=Object(E.a)(/^(.*)profile\/card#me$/g,{storage:1}).exec(e);return(null===t||void 0===t?void 0:t.groups)?t.groups.storage:""})),ze=function(e){return e.login.status},Be=qe.reducer,$e=["buttonProps","menuProps"];var Ge=function(e,t){var n,c=function(n){var c=n.buttonProps,a=n.menuProps,i=Object(d.a)(n,$e),s=Object(r.useState)(!1),o=Object(l.a)(s,2),b=o[0],j=o[1];return Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},i),{},{style:{position:"relative",flexDirection:"column",display:"inline-flex",alignItems:"end",zIndex:3},onMouseLeave:function(){return j(!1)},onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||j(!1)},children:[Object(h.jsx)(e,Object(u.a)(Object(u.a)({},c),{},{onMouseEnter:function(){return j(!0)},onFocus:function(){return j(!0)}})),Object(h.jsx)("div",{style:{position:"relative",width:0,height:0,visibility:b?"visible":"hidden"},children:Object(h.jsx)("div",{className:"box p-0",style:{position:"absolute",right:0,overflow:"hidden"},children:Object(h.jsx)(t,Object(u.a)(Object(u.a)({},a),{},{onClickClose:function(){return j(!1)}}))})})]}))};return c.displayName="WithMenu(".concat((n=e).displayName||n.name||"Component",")"),c},He=Ge((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-user"})}))}),(function(e){var t=e.user,n=e.onLogout;return Object(h.jsx)("div",{className:"menu box p-0",children:Object(h.jsxs)("ul",{className:"menu-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)("a",{className:"disabled",children:t.webId})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{onClick:n,children:"Logout"})})]})})})),Ye=function(e){var t=Object.assign({},e),n=N(),c=C(_e);return"loading"===C(ze)?Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{disabled:!0,children:Object(h.jsx)("i",{className:"icon icon-spinner animate-pulse"})})):c.isLoggedIn?Object(h.jsx)(He,{menuProps:{user:c,onLogout:function(){return n(Fe())}},buttonProps:t}):Object(h.jsx)(w,Object(u.a)(Object(u.a)({},t),{},{contentProps:{onLogin:function(e){n(Ae(e))}},buttonProps:{}}))},Je=n(12),Xe=n(25),Ze=n.n(Xe),Ke=function(e,t){var n=Ze.a.dot(e,Ze.a.transpose([[].concat(Object(Je.a)(t),[1])])),c=Object(l.a)(n,2);return[Object(l.a)(c[0],1)[0],Object(l.a)(c[1],1)[0]]},Qe=function(e){var t,n=null!==(t=Object.entries(e.dependents).length)&&void 0!==t?t:0;return n=n<1?1:n,5*Math.pow(n,.42)},Ve={origin:[0,0],distance:20,highlight:5},et=n(40),tt=n(173),nt=n(663),ct=n(664),rt=n(665),at=n(666),it=n(667),st=n(668);var ot,ut=function e(){var t=this;Object(et.a)(this,e),this.nodes=[],this.links=[],this.runs=!1,this.simulation=Object(tt.a)().alphaDecay(.005).force("link",Object(nt.a)().id((function(e){return e.uri})).distance(50).strength(.1)).force("linkGravity",function(){var e=[],t=3;function n(n){var c=t*n;e.forEach((function(e){var t=e.source,n=e.target;if("object"===typeof t&&"object"===typeof n&&t.y&&n.y&&t.vy&&n.vy&&t.y<n.y+50){var r=(n.y+50-t.y)/50;t.vy+=c*r,n.vy-=c*r}}))}return n.links=function(t){return e=t,n},n.strength=function(e){return t=e,n},n}().strength(50)).force("charge",Object(ct.a)().strength(-150).distanceMax(500)).force("gravityX",Object(rt.a)(0).strength(.01)).force("gravityY",Object(at.a)(0).strength(.01)).force("collide",Object(it.a)((function(e){return e.r+5}))).force("center",Object(st.a)(0,0)).stop(),this.start=function(e){var n=e.nodes,c=e.links,r=e.onTick;t.nodes=n,t.links=c.map((function(e){return Object(u.a)({},e)})),t.simulation.nodes(t.nodes),t.simulation.force("link").links(t.links),t.simulation.force("linkGravity").links(t.links),t.simulation.on("tick",(function(){r({nodes:t.nodes,links:t.links})})),t.simulation.restart(),t.runs=!0},this.stop=function(){return t.runs=!1,t.simulation.stop()},this.update=function(e){var n=e.nodes,c=e.links;t.simulation.stop();var r=Object.fromEntries(t.nodes.map((function(e){return[e.uri,e]}))),a=n.map((function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},e),{},{x:800*(.5-Math.random()),y:800*(.5-Math.random())},r[e.uri]),{},{r:e.r})}));t.nodes=a,t.links=c.map((function(e){return Object(u.a)({},e)})),t.simulation.nodes(t.nodes),t.simulation.force("link").links(t.links),t.simulation.force("linkGravity").links(t.links),t.simulation.alpha(1).restart()},this.selectNode=function(e){var n=e.x,c=e.y;return t.simulation.find(n,c,40)}},lt=function(e,t,n,c){var r=Object(l.a)(t,2),a=r[0],i=r[1];e.font="20px Arial",e.textBaseline="middle",e.textAlign="left",Object.assign(e,c),e.fillText(n,a,i)},dt=function(e,t,n,c){var r=Object(l.a)(t,2),a=r[0],i=r[1];Object.assign(e,c),e.beginPath(),e.arc(a,i,n,0,2*Math.PI),e.fill()},bt=function(e,t,n,c){Object.assign(e,c),e.beginPath(),e.moveTo.apply(e,Object(Je.a)(t)),e.lineTo.apply(e,Object(Je.a)(n)),e.stroke()},jt=n(669),ft=n(287),ht=n(288),pt=["graph","grid","onTransform","onHover","onSelectNode"],Ot=function(e){var t=e.graph,n=e.grid,c=e.onTransform,a=e.onHover,i=e.onSelectNode,s=Object(d.a)(e,pt),o=Object(r.useRef)(null),b=Object(r.useState)({width:0,height:0}),j=Object(l.a)(b,2),p=j[0],O=p.width,v=p.height,m=j[1];Object(r.useEffect)((function(){if(o&&o.current){var e=o.current.getContext("2d");if(e){var c=[O/2,v/2];return e.save(),e.translate.apply(e,c),e.clearRect(-c[0],-c[1],O,v),function(e,t,n,c){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a="#fff2",i=-r[1],s=c-r[1],o=-r[0],u=n-r[0],l=function(e){return 0===e?2:e%t.highlight===0?1:.5},d=0;d*t.distance+t.origin[0]<=u;){var b=d*t.distance+t.origin[0];b>=o&&bt(e,[b,i],[b,s],{strokeStyle:a,lineWidth:l(d)}),d++}for(d=-1;d*t.distance+t.origin[0]>=o;){var j=d*t.distance+t.origin[0];j<=u&&bt(e,[j,i],[j,s],{strokeStyle:a,lineWidth:l(d)}),d--}for(d=0;d*t.distance+t.origin[1]<=s;){var f=d*t.distance+t.origin[1];f>=i&&bt(e,[o,f],[u,f],{strokeStyle:a,lineWidth:l(d)}),d++}for(d=-1;d*t.distance+t.origin[1]>=i;){var h=d*t.distance+t.origin[1];h<=s&&bt(e,[o,h],[u,h],{strokeStyle:a,lineWidth:l(d)}),d--}}(e,n,O,v,c),function(e,t){t.links.forEach((function(t){var n=[t.source.x,t.source.y],c=[t.target.x,t.target.y],r=Ze.a.sub(c,n),a=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),i=Ze.a.div(r,a);bt(e,Ze.a.add(n,Ze.a.mul(i,t.source.r)),Ze.a.sub(c,Ze.a.mul(i,t.target.r)),{strokeStyle:"white",lineWidth:.5})}));var n="violet",c="red",r="pink",a={node:"#fff8",label:"#fff4"},i=t.nodes.filter((function(e){return"accent"===e.style})),s=t.nodes.filter((function(e){return"focus"===e.style})),o=t.nodes.filter((function(e){return"focus2"===e.style})),u=t.nodes.filter((function(e){return!e.style}));u.forEach((function(t){var n=t.x,c=t.y,r=t.r;return dt(e,[n,c],r,{fillStyle:a.node})})),u.forEach((function(t){var n=t.x,c=t.y,r=t.r,i=t.label;return lt(e,[n+r+5,c],i,{fillStyle:a.label})})),o.forEach((function(t){var n=t.x,c=t.y,a=t.r;return dt(e,[n,c],a,{fillStyle:r})})),o.forEach((function(t){var n=t.x,c=t.y,a=t.r,i=t.label;return lt(e,[n+a+5,c],i,{fillStyle:r})})),s.forEach((function(t){var n=t.x,r=t.y,a=t.r;return dt(e,[n,r],a,{fillStyle:c})})),s.forEach((function(t){var n=t.x,r=t.y,a=t.r,i=t.label;return lt(e,[n+a+5,r],i,{fillStyle:c})})),i.forEach((function(t){var c=t.x,r=t.y,a=t.r;return dt(e,[c,r],a,{fillStyle:n})})),i.forEach((function(t){var c=t.x,r=t.y,a=t.r,i=t.label;return lt(e,[c+a+5,r],i,{fillStyle:n})}))}(e,t),function(){return e.restore()}}}}),[O,v,t,o,n]),Object(r.useEffect)((function(){var e=function(){if(o&&o.current){var e=function(e){if(e&&e.current){var t=e.current;return{height:t.clientHeight,width:t.clientWidth}}return{height:0,width:0}}(o);m(e)}};return e(),window.addEventListener("load",e),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),window.removeEventListener("load",e)}}),[O,v,o]),Object(r.useEffect)((function(){o&&o.current&&(Object(ht.a)(o.current).call(Object(jt.a)().clickDistance(2).on("drag",(function(e){c([[1,0,e.dx],[0,1,e.dy],[0,0,1]])}))),Object(ht.a)(o.current).call(Object(ft.a)().clickDistance(2).scaleExtent([.05,3]).on("zoom",(function(e){var t;ot=null!==(t=ot)&&void 0!==t?t:[[1,0,-O/2],[0,1,-v/2],[0,0,1]];var n=e.transform,r=n.x,a=n.y,i=n.k,s=[[i,0,r-O/2],[0,i,a-v/2],[0,0,1]],o=Ze.a.dot(s,Ze.a.inv(ot));ot=s,c(o)}))))}),[o,c,v,O]);var g=function(e){return function(t){if(o&&o.current){var n=o.current.getBoundingClientRect(),c=t.clientX-n.left,r=t.clientY-n.top;e([c-O/2,r-v/2])}}},x=g(a),y=g(i);return Object(h.jsx)("canvas",Object(u.a)(Object(u.a)({},s),{},{ref:o,onMouseMove:x,onMouseOut:function(){return a([1/0,1/0])},width:O,height:v,className:f()(s.className,"has-background-dark"),onClick:y}))};var vt,mt,gt,xt=function(e){var t=C(je),n=C(fe),c=C(he),a=C(Oe),i=N(),s=Object(r.useState)(new ut),o=Object(l.a)(s,1)[0],d=Object(r.useState)({nodes:[],links:[]}),b=Object(l.a)(d,2),j=b[0],f=b[1],p=Object(r.useState)([[1,0,0],[0,1,0],[0,0,1]]),O=Object(l.a)(p,2),v=O[0],m=O[1];Object(r.useEffect)((function(){var e=Date.now()-20;return o.start({nodes:[],links:[],onTick:function(t){var n=t.nodes,c=t.links,r=Date.now();r>e+20&&(f({nodes:Object(Je.a)(n),links:Object(Je.a)(c)}),e=r)}}),function(){o.stop()}}),[o]),Object(r.useEffect)((function(){var e=Object.values(t).map((function(e){return{label:e.label.en,x:400*Math.random(),y:400*Math.random(),r:Qe(e),uri:e.uri}})),n=Object.values(t).reduce((function(e,t){var n=t.uri,c=t.dependencies;return Object.keys(c).forEach((function(t){return e.push({source:n,target:t})})),e}),[]);o.update({nodes:e,links:n})}),[t,o]);var g=function(e){return function(t){var n,c=Ke(Ze.a.inv(v),t),r=Object(l.a)(c,2),a=r[0],i=r[1];e(null===(n=o.selectNode({x:a,y:i}))||void 0===n?void 0:n.uri)}},x=g((function(e){return n!==e&&i(ue(e))})),y=g((function(e){return c!==e&&i(le(e))})),w=function(e,t,n,c,r){var a=Object.fromEntries(t.nodes.map((function(t){var n=Ke(e,[t.x,t.y]),c=Object(l.a)(n,2),r=c[0],a=c[1],i=e[0][0]*t.r;return[t.uri,Object(u.a)(Object(u.a)({},t),{},{x:r,y:a,r:i,style:""})]})));r.forEach((function(e){return a[e].style="focus2"})),n&&a[n]&&(a[n].style="accent"),c&&a[c]&&(a[c].style="focus");var i=t.links.map((function(e){var n="string"===typeof e.source?e.source:"number"===typeof e.source?t.nodes[e.source].uri:e.source.uri,c="string"===typeof e.target?e.target:"number"===typeof e.target?t.nodes[e.target].uri:e.target.uri;return{source:a[n],target:a[c]}}));return{nodes:Object.values(a),links:i}}(v,j,n,c,a),k=function(e,t){for(var n=t.distance*e[0][0];n<20;)n*=5;return{origin:Ke(e,t.origin),distance:n,highlight:t.highlight}}(v,Ve);return Object(h.jsx)(Ot,Object(u.a)({graph:w,grid:k,onTransform:function(e){m((function(t){return Ze.a.dot(e,t)}))},onHover:x,onSelectNode:y},e))},yt=b.a.a(vt||(vt=Object(o.a)(["\n  color: lightgray;\n  &:hover {\n    color: white;\n  }\n"]))),wt=b.a.footer(mt||(mt=Object(o.a)(["\n  color: gray;\n"]))),kt=function(e){return Object(h.jsx)("div",Object(u.a)(Object(u.a)({},e),{},{children:Object(h.jsxs)(wt,{children:["powered by ",Object(h.jsx)(yt,{href:"https://solidproject.org",children:"Solid"})," \xb7"," ",Object(h.jsx)(yt,{href:"https://github.com/livegraph-org/solid-math",children:"source"})]})}))},Nt=y((function(e){var t=Object.assign({},e);return Object(h.jsx)("a",Object(u.a)(Object(u.a)({},t),{},{children:"Add Document"}))}),(function(e){var t=e.onFinish,n=void 0===t?function(){}:t,c=C(Ue),a=N(),i=Object(r.useState)(!0),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),j=b[0],f=b[1];return Object(h.jsx)("section",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(ke({uri:"".concat(c).concat(o?"public":"private","/math/").concat(j,".ttl"),isPublic:o})),n()},children:[Object(h.jsxs)("div",{className:"field buttons are-small has-addons",children:[Object(h.jsx)("input",{className:"button".concat(o?" is-success":""),type:"button",value:"Public",onClick:function(){return u(!0)}}),Object(h.jsx)("input",{className:"button".concat(o?"":" is-warning"),type:"button",value:"Private",onClick:function(){return u(!1)}})]}),Object(h.jsxs)("div",{className:"field",children:[c,o?"public":"private","/math/",Object(h.jsx)("input",{type:"text",value:j,placeholder:"set-theory",onChange:function(e){return f(e.target.value)}}),".ttl"]}),Object(h.jsxs)("div",{className:"field buttons",children:[Object(h.jsx)("input",{className:"button is-success",type:"submit",value:"Create"}),Object(h.jsx)("input",{className:"button is-danger",type:"reset",value:"Cancel",onClick:n})]})]})})}),"Add a document"),Ct=Ge((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-plus","aria-label":"add"})}))}),(function(e){var t=e.onAddMath,n=e.onClickClose;return Object(h.jsx)("div",{className:"menu box p-0",children:Object(h.jsxs)("ul",{className:"menu-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)(Nt,{buttonProps:{onClick:n}})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{onClick:function(){n(),t()},children:"Add Math"})})]})})})),Et=function(e){var t="";return e.read&&(t+="R"),e.write&&(t+="W"),e.append&&(t+="A"),t},It=function(e){var t=Et(e.user);return e.public&&(t+=" ",t+=Et(e.public)),t||"none"},St=y((function(e){var t=Object.assign({},e);return Object(h.jsx)(O,Object(u.a)(Object(u.a)({},t),{},{children:Object(h.jsx)("i",{className:"icon icon-document","aria-label":"Math Documents"})}))}),(function(){var e=C(Ee),t=C(Se),n=N();return Object(h.jsx)("ul",{children:e.map((function(e){var c=e.uri,r=e.access;return Object(h.jsx)("li",{children:Object(h.jsxs)("button",{className:f()("button is-small",c===t&&"is-success"),disabled:!(r.user.write||r.user.append),onClick:function(){return n(Ce(c))},children:[c," ",It(r)]})},c)}))})}),"Math Documents"),Lt=function(e){var t=Object.assign({},e),n=N(),c=C(We);return Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},t),{},{children:[Object(h.jsx)(O,{"aria-label":"people",onClick:function(){return alert("people control not implemented")},children:Object(h.jsx)("i",{className:"icon icon-users"})}),Object(h.jsx)(St,{}),c&&Object(h.jsx)(Ct,{buttonProps:{},menuProps:{onAddMath:function(){return n(de(!0))}}})]}))},Dt=Object(D.c)({name:"search",initialState:{query:"",queryAutocomplete:""},reducers:{setSearch:function(e,t){e.query=t.payload},setAutocomplete:function(e,t){e.queryAutocomplete=t.payload}}}),Mt=Dt.actions,Pt=Mt.setSearch,Tt=Mt.setAutocomplete,At=function(e){return e.search.query},Ft=Object(M.a)(At,be,(function(e,t){return e.length<2?[]:Object.values(t).filter((function(t){return t.label.en.toLowerCase().includes(e.toLowerCase())})).sort((function(e,t){var n=e.dependents,c=t.dependents;return Object.values(c).length-Object.values(n).length})).map((function(e){return{value:e.uri,label:e.label.en}})).slice(0,10)})),qt=Object(M.a)((function(e){return e.search.queryAutocomplete}),be,(function(e,t){return e.length<2?[]:Object.values(t).filter((function(t){return t.label.en.toLowerCase().includes(e.toLowerCase())})).sort((function(e,t){var n=e.dependents,c=t.dependents;return Object.values(c).length-Object.values(n).length})).slice(0,10)})),_t=Dt.reducer,Rt=function(e){var t=Object.assign({},e),n=C(At),c=C(Ft),a=N(),i=Object(r.useState)(!1),s=Object(l.a)(i,2),o=s[0],d=s[1],b=Object(r.useCallback)((function(){d(!1),a(Pt(""))}),[a]);return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&b()};return document.addEventListener("keydown",e,!1),function(){return document.removeEventListener("keydown",e,!1)}}),[b]),o?Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},t),{},{className:"box p-0",children:[Object(h.jsxs)("p",{className:"control has-icons-right",children:[Object(h.jsx)("input",{autoFocus:!0,type:"text",className:"input",placeholder:"Search",value:n,onChange:function(e){return a(Pt(e.target.value))}}),Object(h.jsx)("span",{className:"icon is-right",children:Object(h.jsx)("i",{className:"icon icon-search"})})]}),Object(h.jsx)("div",{className:"menu",children:Object(h.jsx)("ul",{className:"menu-list",children:c.map((function(e){var t=e.value,n=e.label;return Object(h.jsx)("li",{title:t,onMouseEnter:function(){return a(ue(t))},onMouseLeave:function(){return a(ue(""))},children:Object(h.jsx)("a",{onClick:function(){a(le(t)),b()},children:n})},t)}))})})]})):Object(h.jsx)(O,{onClick:function(){return d(!0)},children:Object(h.jsx)("i",{className:"icon icon-search"})})},Wt=["info","onClose"],Ut=function(e){var t=e.info,n=e.onClose,c=Object(d.a)(e,Wt);if(!t.message)return null;var r="success"===t.type?"success":"error"===t.type?"danger":"info";return Object(h.jsx)("div",Object(u.a)(Object(u.a)({},c),{},{children:Object(h.jsxs)("div",{className:f()("notification","is-".concat(r)),children:[Object(h.jsx)("button",{className:"delete",onClick:n}),t.message]})}))},zt=function(e){var t=Object.assign({},e),n=C(R),c=N();return Object(h.jsx)(Ut,Object(u.a)({info:n,onClose:function(){return c(_())}},t))},Bt=(n(519),n(283)),$t=n.n(Bt),Gt=n(284),Ht=n.n(Gt),Yt=n(285),Jt=n.n(Yt),Xt=b.a.div(gt||(gt=Object(o.a)(["\n  img {\n    max-width: 100%;\n  }\n"])));function Zt(e){var t={children:e.children,remarkPlugins:[Ht.a],rehypePlugins:[Jt.a]};return Object(h.jsx)(Xt,{children:Object(h.jsx)($t.a,Object(u.a)({},t))})}var Kt,Qt,Vt,en,tn,nn,cn=function(e){var t=e.node;return Object(h.jsx)(Zt,{children:t.description.en})},rn=function(e){var t=e.value,n=e.onChange;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("span",{className:"has-text-grey is-size-7",children:["You can use"," ",Object(h.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",children:"Markdown"})," and"," ",Object(h.jsx)("a",{href:"http://asciimath.org/",children:"AsciiMath"})," (use $inline math$ and $$multiline math$$)."]}),Object(h.jsx)("textarea",{className:"textarea",placeholder:"description",value:t,onChange:function(e){return n(e.target.value)}}),Object(h.jsx)(Zt,{children:t})]})},an=function(e){var t=e.value,n=e.onChange;return Object(h.jsx)("input",{className:"input is-small",type:"text",placeholder:"label",value:t,onChange:function(e){return n(e.target.value)},size:10})},sn=function(e){var t=e.uri,n=e.label;return Object(h.jsx)("a",{href:t,children:n})},on=n(286),un=n.n(on),ln=(n(657),function(e){var t=e.title,n=e.nodes,c=N();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{className:"card-header",children:Object(h.jsxs)("p",{className:"card-header-title",children:[t,": ",n.length]})}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)("ul",{className:"buttons are-small",children:n.map((function(e){return Object(h.jsx)("li",{onClick:function(){return c(le(e.uri))},onMouseEnter:function(){return c(ue(e.uri))},onMouseLeave:function(){return c(ue(""))},className:"button is-link is-inverted",children:e.label.en},e.uri)}))})})]})}),dn=function(e){var t=e.title,n=e.nodes,c=e.onAddNode,r=e.onRemoveNode,a=N(),i=Object.values(n).map((function(e){return{id:e.uri,name:e.label.en}})),s=C(qt),o=s.map((function(e){var t=e.label;return{id:e.uri,name:t.en}}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{className:"card-header",children:Object(h.jsxs)("p",{className:"card-header-title",children:[t,": ",n.length]})}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)(un.a,{suggestions:o,tags:i,onInput:function(e){return a(Tt(e))},onAddition:function(e){var t=s.find((function(t){return t.uri===e.id}));t&&c(t)},onDelete:function(e){r(n[e])},placeholderText:"Add a dependency",removeButtonText:"Remove the dependency",classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected tags",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled"},allowBackspace:!1,tagComponent:bn})})]})},bn=function(e){var t=e.tag,n=e.removeButtonText,c=e.onDelete;return Object(h.jsxs)("span",{className:"tag is-info",children:[t.name,Object(h.jsx)("button",{title:n,onClick:c,className:"delete is-small"})]})},jn=function(e){var t=e.value,n=e.onChange;return Object(h.jsx)("div",{className:"tags",children:t?Object(h.jsxs)("span",{className:"tag is-info",children:[t,Object(h.jsx)("button",{className:"delete is-small",onClick:function(){return n("")}})]}):["definition","statement"].map((function(e){return Object(h.jsx)("span",{className:"tag is-info is-light",onClick:function(){return n(e)},children:e},e)}))})},fn=function(e){var t=e.value;return Object(h.jsx)("span",{className:"tag is-info",children:t})},hn=function(e,t){var n=t.split("/"),c=e.split("/"),r=c.findIndex((function(e,t){return e!==n[t]}));return r<3?e:c.slice(r).join("/")},pn=function(e){var t=e.onFinish,n=N(),c=C(pe),a=C(ve),i=C(Ie),s=C(Se),o=C(Re),u=Object(r.useState)(c?"":a.type),d=Object(l.a)(u,2),b=d[0],j=d[1],f=Object(r.useState)(c?"":a.label.en),p=Object(l.a)(f,2),O=p[0],v=p[1],m=Object(r.useState)(c?"":a.description.en),g=Object(l.a)(m,2),x=g[0],y=g[1],w=Object(r.useState)(c?[]:Object.values(a.dependencies)),k=Object(l.a)(w,2),E=k[0],I=k[1],S=b&&O&&x&&(s||a.document),L=Object(r.useCallback)((function(){j(c?"":a.type),v(c?"":a.label.en),y(c?"":a.description.en),I(c?[]:Object.values(a.dependencies))}),[a,c]),D=function(){if(!b)throw new Error("please select a type");if(!O)throw new Error("please specify a label");if(!x)throw new Error("please write a description");if(c&&!s)throw new Error("please select a document");n(c?ae({type:b,label:{en:O},description:{en:x},dependencies:E.map((function(e){return e.uri})),document:s}):re({type:b,label:{en:O},description:{en:x},dependencies:E.map((function(e){return e.uri})),id:a.uri,document:a.document.id})),M()};Object(r.useEffect)((function(){L()}),[a,L]);var M=function(){L(),t()};return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("header",{className:"card-header",children:[Object(h.jsx)("div",{className:"card-header-title",children:Object(h.jsxs)("div",{className:"block is-flex-grow-1",children:[Object(h.jsx)("div",{className:"title is-6",children:c?"Create a new Math":Object(h.jsxs)(h.Fragment,{children:["Edit a ",a.type," ",Object(h.jsx)("i",{children:a.label.en})]})}),Object(h.jsx)("div",{className:"field",children:Object(h.jsx)(an,{value:O,onChange:v})}),Object(h.jsx)("div",{className:"field",children:Object(h.jsx)(jn,{value:b,onChange:j})}),c&&Object(h.jsx)("div",{className:"field select",children:Object(h.jsxs)("select",{value:s,onChange:function(e){return n(Ce(e.target.value))},children:[Object(h.jsx)("option",{hidden:!0,disabled:!0,value:"",children:" -- select a document to save to -- "}),i.map((function(e){return Object(h.jsx)("option",{value:e.uri,children:hn(e.uri,o)},e.uri)}))]})})]})}),Object(h.jsx)("button",{className:"card-header-icon","aria-label":"cancel editing",title:"cancel editing",onClick:M,children:Object(h.jsx)("i",{className:"icon icon-cancel has-text-danger","aria-hidden":"true"})}),Object(h.jsx)("button",{className:"card-header-icon has-text-".concat(S?"success":"grey-light"),"aria-label":"save changes",title:"save changes",onClick:D,disabled:!S,children:Object(h.jsx)("i",{className:"icon icon-ok","aria-hidden":"true"})})]}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)(rn,{value:x,onChange:y})}),Object(h.jsx)(dn,{title:"dependencies",nodes:E,onAddNode:function(e){I((function(t){return[].concat(Object(Je.a)(t),[e])}))},onRemoveNode:function(e){I((function(t){return t.filter((function(t){return t.uri!==e.uri}))}))}}),Object(h.jsxs)("footer",{className:"card-footer",children:[Object(h.jsxs)("button",{className:"card-header-icon card-footer-item","aria-label":"cancel editing",title:"cancel editing",onClick:M,children:[Object(h.jsx)("i",{className:"icon icon-cancel has-text-danger","aria-hidden":"true"})," ","Cancel"]}),Object(h.jsxs)("button",{className:"card-header-icon card-footer-item has-text-".concat(S?"success":"grey-light"),"aria-label":"save changes",title:"save changes",onClick:D,disabled:!S,children:[Object(h.jsx)("i",{className:"icon icon-ok","aria-hidden":"true"})," Save"]})]})]})},On=["uri","onFinish","onDelete"],vn=y((function(e){var t=Object.assign({},e);return Object(h.jsx)("button",Object(u.a)(Object(u.a)({},t),{},{className:"button is-danger is-inverted",children:"Delete Node"}))}),(function(e){var t=e.uri,n=e.onFinish,c=void 0===n?function(){return null}:n,a=e.onDelete,i=Object(d.a)(e,On),s=new URL(t).hash||String(Date.now()),o=Object(r.useState)(""),b=Object(l.a)(o,2),j=b[0],f=b[1],p=s!==j;return Object(h.jsxs)("div",Object(u.a)(Object(u.a)({},i),{},{children:["If yes, please retype the text ",Object(h.jsx)("code",{children:s})," below.",Object(h.jsx)("div",{className:"field",children:Object(h.jsx)("input",{maxLength:s.length,className:"input",type:"text",value:j,onChange:function(e){return f(e.target.value)}})}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("button",{className:"button is-danger",disabled:p,onClick:function(){c(),a()},children:"Delete"}),Object(h.jsx)("button",{className:"button is-info is-inverted",onClick:c,children:"Cancel"})]})]}))})),mn=function(e){var t=e.onEdit,n=N(),c=C(ve),r=Object.values(c.dependencies),a=Object.values(c.dependents),i=c.document.access.user.write;return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("header",{className:"card-header",children:[Object(h.jsx)("div",{className:"card-header-title",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)(sn,{uri:c.uri,label:c.label.en})}),Object(h.jsx)("div",{children:Object(h.jsx)(fn,{value:c.type})})]})}),i&&Object(h.jsx)("button",{className:"card-header-icon","aria-label":"edit label",onClick:t,children:Object(h.jsx)("i",{className:"icon icon-edit","aria-hidden":"true"})}),Object(h.jsx)("span",{className:"card-header-icon",children:Object(h.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return n(le(""))},children:"close"})})]}),Object(h.jsx)("section",{className:"card-content",children:Object(h.jsx)(cn,{node:c})}),Object(h.jsx)(ln,{title:"dependencies",nodes:r}),Object(h.jsx)(ln,{title:"dependents",nodes:a}),i&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{className:"card-header",children:Object(h.jsx)("p",{className:"card-header-title has-text-danger",children:"Danger Zone"})}),Object(h.jsx)("section",{className:"card-content has-background-danger",children:Object(h.jsx)(vn,{title:"Do you really want to delete ".concat(c.type," ").concat(c.label.en,"?"),contentProps:{uri:c.uri,onDelete:function(){return n(ie(c))}}})})]})]})},gn=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=C(he),i=C(pe),s=N();return Object(r.useEffect)((function(){c(!1)}),[a]),i?Object(h.jsx)(pn,{onFinish:function(){return s(de(!1))}}):a?n?Object(h.jsx)(pn,{onFinish:function(){return c(!1)}}):Object(h.jsx)(mn,{onEdit:function(){return c(!0)}}):null},xn=b.a.div(Kt||(Kt=Object(o.a)(["\n  position: fixed;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  pointer-events: none;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),yn=b.a.div(Qt||(Qt=Object(o.a)(["\n  pointer-events: all;\n  overflow-x: auto;\n  width: 100%;\n"]))),wn=function(e){var t=e.children;return Object(h.jsx)(xn,{children:Object(h.jsx)("div",{className:"columns mr-1 mt-6",children:Object(h.jsx)("div",{className:"column is-one-quarter is-offset-three-quarters",children:Object(h.jsx)(yn,{children:t})})})})},kn=Object(b.a)(kt)(Vt||(Vt=Object(o.a)(["\n  position: fixed;\n  bottom: 1rem;\n  right: 1rem;\n"]))),Nn=Object(b.a)(zt)(en||(en=Object(o.a)(["\n  position: fixed;\n  bottom: 0.5rem;\n  left: 0.5rem;\n"]))),Cn=Object(b.a)(xt)(tn||(tn=Object(o.a)(["\n  height: 100vh;\n  width: 100vw;\n  display: block;\n"]))),En=b.a.nav(nn||(nn=Object(o.a)(["\n  display: flex;\n  position: absolute;\n  width: 100%;\n  pointer-events: none;\n  justify-content: space-between;\n  & > * {\n    pointer-events: all;\n  }\n  padding: 1rem;\n"]))),In=function(){return Object(h.jsx)(wn,{children:Object(h.jsx)(gn,{})})},Sn=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(En,{children:[Object(h.jsx)(Lt,{}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Rt,{style:{display:"inline-block",position:"relative",zIndex:2}}),Object(h.jsx)(Ye,{})]})]}),Object(h.jsx)(kn,{}),Object(h.jsx)(Nn,{}),Object(h.jsx)(In,{}),Object(h.jsx)(Cn,{})]})},Ln=function(){var e=N();return Object(r.useEffect)((function(){e(Te())}),[e]),Object(h.jsx)(Sn,{})},Dn=Object(D.a)({reducer:{login:Be,math:me,search:_t,document:Le,info:W}}),Mn=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,695)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};if("object"===typeof document){var Pn=document.querySelector("#root");m.a.setAppElement(Pn)}s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(k.a,{store:Dn,children:Object(h.jsx)(Ln,{})})}),document.getElementById("root")),Mn()}},[[658,1,2]]]);
//# sourceMappingURL=main.a12d17b4.chunk.js.map